        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script type="text/javascript">
			jQuery(function($) {
				var supportsAudio = !!document.createElement('audio').canPlayType;
				if(supportsAudio) {
					var index = 0,
					playing = false;
					mediaPath = '',
					extension = '',
					tracks = [
                        {% for track in tracks %}
                            {"track":"{{ forloop.counter }}","name":"{{ track.metadata.title }}","length":"{{ track.metadata.length }}","file":"{{ track.file.url }}"},
                        {% endfor %}
					],
					trackCount = tracks.length,
					npAction = $('#npAction'),
					npTitle = $('#npTitle'),
					audio = $('#audio1').bind('play', function() {
						playing = true;
						npAction.text('Teraz odtwarzany:');
					}).bind('pause', function() {
						playing = false;
						npAction.text('Pauza:');
					}).bind('ended', function() {
						npAction.text('Pauza:');
						if((index + 1) < trackCount) {
							index++;
							loadTrack(index);
							audio.play();
						} else {
							audio.pause();
							index = 0;
							loadTrack(index);
						}
					}).get(0),
					btnPrev = $('#btnPrev').click(function() {
						if((index - 1) > -1) {
							index--;
							loadTrack(index);
							if(playing) {
								audio.play();
							}
						} else {
							audio.pause();
							index = 0;
							loadTrack(index);
						}
					}),
					btnNext = $('#btnNext').click(function() {
						if((index + 1) < trackCount) {
							index++;
							loadTrack(index);
							if(playing) {
								audio.play();
							}
						} else {
							audio.pause();
							index = 0;
							loadTrack(index);
						}
					}),
					li = $('#plUL li').click(function() {
						var id = parseInt($(this).index());
						if(id !== index) {
							playTrack(id);
						}
					}),
					loadTrack = function(id) {
						$('.plSel').removeClass('plSel');
						$('#plUL li:eq(' + id + ')').addClass('plSel');
						npTitle.text(tracks[id].name);
						index = id;
{#						audio.src = mediaPath + tracks[id].file + extension;#}
                        audio.src = tracks[id].file
					},
					playTrack = function(id) {
						loadTrack(id);
						audio.play();
					};

					extension = audio.canPlayType('audio/mpeg') ? '.mp3' : audio.canPlayType('audio/ogg') ? '.ogg' : '';

					loadTrack(index);
				}

				$('#useLegend').click(function(e) {
					e.preventDefault();
					$('#use').slideToggle(300, function() {
						$('#useSpanSpan').text(($('#use').css('display') == 'none' ? 'show' : 'hide'));
					});
				});
			});
		</script>
